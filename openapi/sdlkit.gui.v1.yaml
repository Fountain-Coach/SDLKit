openapi: 3.1.0
info:
  title: SDLKit GUI Agent API
  version: 1.0.0
  description: |
    Source-of-truth OpenAPI for the SDLKit GUI Agent.
    Agent protocol version: sdlkit.gui.v1
servers:
  - url: http://localhost:8080
paths:
  /health:
    get:
      operationId: health
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OkResponse'
  /version:
    get:
      operationId: version
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  agent: { type: string }
                  openapi: { type: string }
                required: [agent, openapi]
  /agent/gui/window/open:
    post:
      operationId: openWindow
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OpenWindowRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/OpenWindowResponse'
        '400': { $ref: '#/components/responses/Error' }
  /agent/gui/window/close:
    post:
      operationId: closeWindow
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
        '400': { $ref: '#/components/responses/Error' }
  /agent/gui/window/show:
    post:
      operationId: showWindow
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/hide:
    post:
      operationId: hideWindow
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/resize:
    post:
      operationId: resizeWindow
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                width: { type: integer, minimum: 1 }
                height: { type: integer, minimum: 1 }
              required: [window_id, width, height]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/setTitle:
    post:
      operationId: setTitle
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                title: { type: string }
              required: [window_id, title]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/setPosition:
    post:
      operationId: setPosition
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                x: { type: integer }
                y: { type: integer }
              required: [window_id, x, y]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/maximize:
    post:
      operationId: maximize
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/minimize:
    post:
      operationId: minimize
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/restore:
    post:
      operationId: restore
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/setFullscreen:
    post:
      operationId: setFullscreen
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                enabled: { type: boolean }
              required: [window_id, enabled]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/setAlwaysOnTop:
    post:
      operationId: setAlwaysOnTop
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                enabled: { type: boolean }
              required: [window_id, enabled]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/setOpacity:
    post:
      operationId: setOpacity
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                opacity: { type: number, minimum: 0.0, maximum: 1.0 }
              required: [window_id, opacity]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/center:
    post:
      operationId: center
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/window/getInfo:
    post:
      operationId: getWindowInfo
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WindowInfo'
  /agent/gui/clear:
    post:
      operationId: clear
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ColorRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/present:
    post:
      operationId: present
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/render/getOutputSize:
    post:
      operationId: renderGetOutputSize
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/WindowOnlyRequest' }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: { width: {type: integer}, height: {type: integer} }
  /agent/gui/render/getScale:
    post:
      operationId: renderGetScale
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/WindowOnlyRequest' }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: { sx: {type: number}, sy: {type: number} }
  /agent/gui/render/setScale:
    post:
      operationId: renderSetScale
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                sx: { type: number }
                sy: { type: number }
              required: [window_id, sx, sy]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/render/getDrawColor:
    post:
      operationId: renderGetDrawColor
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/WindowOnlyRequest' }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: { color: { type: integer, description: ARGB 0xAARRGGBB } }
  /agent/gui/render/setDrawColor:
    post:
      operationId: renderSetDrawColor
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/ColorRequest' }
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/render/getViewport:
    post:
      operationId: renderGetViewport
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/WindowOnlyRequest' }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: { x: {type: integer}, y: {type: integer}, width: {type: integer}, height: {type: integer} }
  /agent/gui/render/setViewport:
    post:
      operationId: renderSetViewport
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                x: { type: integer }
                y: { type: integer }
                width: { type: integer }
                height: { type: integer }
              required: [window_id, x, y, width, height]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/render/getClipRect:
    post:
      operationId: renderGetClipRect
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/WindowOnlyRequest' }
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties: { x: {type: integer}, y: {type: integer}, width: {type: integer}, height: {type: integer} }
  /agent/gui/render/setClipRect:
    post:
      operationId: renderSetClipRect
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                x: { type: integer }
                y: { type: integer }
                width: { type: integer }
                height: { type: integer }
              required: [window_id, x, y, width, height]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/render/disableClipRect:
    post:
      operationId: renderDisableClipRect
      requestBody:
        required: true
        content:
          application/json:
            schema: { $ref: '#/components/schemas/WindowOnlyRequest' }
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/drawRectangle:
    post:
      operationId: drawRectangle
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RectRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/drawLine:
    post:
      operationId: drawLine
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/LineRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/drawCircleFilled:
    post:
      operationId: drawCircleFilled
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CircleRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/drawText:
    post:
      operationId: drawText
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TextRequest'
      responses:
        '200': { $ref: '#/components/responses/Ok' }
        '400': { $ref: '#/components/responses/Error' }
  /agent/gui/captureEvent:
    post:
      operationId: captureEvent
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CaptureEventRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  event:
                    $ref: '#/components/schemas/Event'
  /agent/gui/clipboard/get:
    post:
      operationId: clipboardGet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  text: { type: string }
  /agent/gui/clipboard/set:
    post:
      operationId: clipboardSet
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                text: { type: string }
              required: [window_id, text]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/input/getKeyboardState:
    post:
      operationId: getKeyboardState
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  modifiers:
                    type: object
                    properties:
                      shift: { type: boolean }
                      ctrl: { type: boolean }
                      alt: { type: boolean }
                      gui: { type: boolean }
  /agent/gui/input/getMouseState:
    post:
      operationId: getMouseState
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  x: { type: integer }
                  y: { type: integer }
                  buttons: { type: array, items: { type: integer } }
  /agent/gui/display/list:
    get:
      operationId: listDisplays
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  displays:
                    type: array
                    items:
                      type: object
                      properties:
                        id: { type: integer }
                        name: { type: string }
  /agent/gui/display/getInfo:
    post:
      operationId: getDisplayInfo
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                index: { type: integer, minimum: 0 }
              required: [index]
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  bounds:
                    type: object
                    properties: { x: {type: integer}, y: {type: integer}, width: {type: integer}, height: {type: integer} }
  /agent/gui/texture/load:
    post:
      operationId: textureLoad
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                id: { type: string, description: logical texture id }
                path: { type: string }
              required: [window_id, id, path]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/texture/draw:
    post:
      operationId: textureDraw
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                id: { type: string }
                x: { type: integer }
                y: { type: integer }
                width: { type: integer, nullable: true }
                height: { type: integer, nullable: true }
              required: [window_id, id, x, y]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/texture/free:
    post:
      operationId: textureFree
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                id: { type: string }
              required: [window_id, id]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/screenshot/capture:
    post:
      operationId: screenshotCapture
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/WindowOnlyRequest'
      responses:
        '200':
          description: OK
          content:
            application/json:
              schema:
                type: object
                properties:
                  raw_base64: { type: string, description: ABGR8888 pixel data, row-major }
                  width: { type: integer }
                  height: { type: integer }
                  pitch: { type: integer }
                  format: { type: string, enum: [ABGR8888] }
components:
  responses:
    Ok:
      description: OK
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/OkResponse'
    Error:
      description: Error
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorResponse'
  schemas:
    OkResponse:
      type: object
      properties:
        ok: { type: boolean }
      required: [ok]
    ErrorResponse:
      type: object
      properties:
        error:
          type: object
          properties:
            code: { type: string }
            details: { type: string, nullable: true }
          required: [code]
      required: [error]
    WindowOnlyRequest:
      type: object
      properties:
        window_id: { type: integer, minimum: 1 }
      required: [window_id]
    OpenWindowRequest:
      type: object
      properties:
        title: { type: string }
        width: { type: integer, minimum: 1 }
        height: { type: integer, minimum: 1 }
      required: [title, width, height]
    OpenWindowResponse:
      type: object
      properties:
        window_id: { type: integer, minimum: 1 }
      required: [window_id]
    WindowInfo:
      type: object
      properties:
        window_id: { type: integer, minimum: 1 }
        x: { type: integer }
        y: { type: integer }
        width: { type: integer }
        height: { type: integer }
        title: { type: string }
      required: [window_id, x, y, width, height, title]
    Color:
      oneOf:
        - type: string
          description: CSS color name or hex (#RRGGBB or #AARRGGBB)
        - type: integer
          description: ARGB as 0xAARRGGBB
    ColorRequest:
      type: object
      properties:
        window_id: { type: integer, minimum: 1 }
        color: { $ref: '#/components/schemas/Color' }
      required: [window_id, color]
    RectRequest:
      type: object
      properties:
        window_id: { type: integer, minimum: 1 }
        x: { type: integer }
        y: { type: integer }
        width: { type: integer, minimum: 1 }
        height: { type: integer, minimum: 1 }
        color: { $ref: '#/components/schemas/Color' }
      required: [window_id, x, y, width, height, color]
    LineRequest:
      type: object
      properties:
        window_id: { type: integer, minimum: 1 }
        x1: { type: integer }
        y1: { type: integer }
        x2: { type: integer }
        y2: { type: integer }
        color: { $ref: '#/components/schemas/Color' }
      required: [window_id, x1, y1, x2, y2, color]
    CircleRequest:
      type: object
      properties:
        window_id: { type: integer, minimum: 1 }
        cx: { type: integer }
        cy: { type: integer }
        radius: { type: integer, minimum: 0 }
        color: { $ref: '#/components/schemas/Color' }
      required: [window_id, cx, cy, radius, color]
    TextRequest:
      type: object
      properties:
        window_id: { type: integer, minimum: 1 }
        text: { type: string }
        x: { type: integer }
        y: { type: integer }
        font: { type: string, nullable: true, description: 'file path, system:default, or name:<id>' }
        size: { type: integer, minimum: 1, nullable: true }
        color:
          type: integer
          description: ARGB as 0xAARRGGBB (optional; default white)
          nullable: true
      required: [window_id, text, x, y]
    CaptureEventRequest:
      type: object
      properties:
        window_id: { type: integer, minimum: 1 }
        timeout_ms: { type: integer, minimum: 0, nullable: true }
      required: [window_id]
    Event:
      type: object
      properties:
        type:
          type: string
          enum: [key_down, key_up, mouse_down, mouse_up, mouse_move, quit, window_closed]
        x: { type: integer, nullable: true }
        y: { type: integer, nullable: true }
        key: { type: string, nullable: true }
        button: { type: integer, nullable: true }
      required: [type]
  /agent/gui/texture/drawTiled:
    post:
      operationId: textureDrawTiled
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                id: { type: string }
                x: { type: integer }
                y: { type: integer }
                width: { type: integer }
                height: { type: integer }
                tileWidth: { type: integer, minimum: 1 }
                tileHeight: { type: integer, minimum: 1 }
              required: [window_id, id, x, y, width, height, tileWidth, tileHeight]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
  /agent/gui/texture/drawRotated:
    post:
      operationId: textureDrawRotated
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                window_id: { type: integer, minimum: 1 }
                id: { type: string }
                x: { type: integer }
                y: { type: integer }
                width: { type: integer, nullable: true }
                height: { type: integer, nullable: true }
                angle: { type: number, description: degrees }
                cx: { type: number, nullable: true, description: rotation center X }
                cy: { type: number, nullable: true, description: rotation center Y }
              required: [window_id, id, x, y, angle]
      responses:
        '200': { $ref: '#/components/responses/Ok' }
