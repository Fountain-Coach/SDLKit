Ly8gZmFrZSBtZXRhbGxpYiBwbGFjZWhvbGRlcgovLyBmYWtlIG1ldGFsIEFJUiBwbGFjZWhvbGRl
cgojaW5jbHVkZSA8bWV0YWxfc3RkbGliPgojaW5jbHVkZSA8c2ltZC9zaW1kLmg+Cgp1c2luZyBu
YW1lc3BhY2UgbWV0YWw7CgpzdHJ1Y3QgdHlwZV9Db25zdGFudEJ1ZmZlcl9QcmVmaWx0ZXJQYXJh
bXMKewogICAgZmxvYXQgcm91Z2huZXNzOwogICAgZmxvYXQgbWlwTGV2ZWw7CiAgICB1aW50IGZh
Y2VJbmRleDsKICAgIHVpbnQgc2FtcGxlQ291bnQ7Cn07CgprZXJuZWwgdm9pZCBpYmxfcHJlZmls
dGVyX2Vudl9jcyhjb25zdGFudCB0eXBlX0NvbnN0YW50QnVmZmVyX1ByZWZpbHRlclBhcmFtcyYg
UHJlZmlsdGVyQ0IgW1tidWZmZXIoMCldXSwgdGV4dHVyZWN1YmU8ZmxvYXQ+IEVudmlyb25tZW50
TWFwIFtbdGV4dHVyZSgwKV1dLCB0ZXh0dXJlMmRfYXJyYXk8ZmxvYXQsIGFjY2Vzczo6d3JpdGU+
IE91dHB1dFRleHR1cmUgW1t0ZXh0dXJlKDEpXV0sIHNhbXBsZXIgRW52aXJvbm1lbnRTYW1wbGVy
IFtbc2FtcGxlcigwKV1dLCB1aW50MyBnbF9HbG9iYWxJbnZvY2F0aW9uSUQgW1t0aHJlYWRfcG9z
aXRpb25faW5fZ3JpZF1dKQp7CiAgICBkbwogICAgewogICAgICAgIHVpbnQzIF81MyA9IHVpbnQz
KE91dHB1dFRleHR1cmUuZ2V0X3dpZHRoKCksIE91dHB1dFRleHR1cmUuZ2V0X2hlaWdodCgpLCBP
dXRwdXRUZXh0dXJlLmdldF9hcnJheV9zaXplKCkpOwogICAgICAgIHVpbnQgXzU0ID0gXzUzLng7
CiAgICAgICAgdWludCBfNTUgPSBfNTMueTsKICAgICAgICBib29sIF82MzsKICAgICAgICBpZiAo
IShnbF9HbG9iYWxJbnZvY2F0aW9uSUQueCA+PSBfNTQpKQogICAgICAgIHsKICAgICAgICAgICAg
XzYzID0gZ2xfR2xvYmFsSW52b2NhdGlvbklELnkgPj0gXzU1OwogICAgICAgIH0KICAgICAgICBl
bHNlCiAgICAgICAgewogICAgICAgICAgICBfNjMgPSB0cnVlOwogICAgICAgIH0KICAgICAgICBp
ZiAoXzYzKQogICAgICAgIHsKICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgfQogICAgICAgIGZs
b2F0MiBfNzYgPSAoKChmbG9hdDIoZ2xfR2xvYmFsSW52b2NhdGlvbklELnh5KSArIGZsb2F0Migw
LjUpKSAvIGZsb2F0MihmbG9hdChfNTQpLCBmbG9hdChfNTUpKSkgKiAyLjApIC0gZmxvYXQyKDEu
MCk7CiAgICAgICAgZmxvYXQzIF8xMTU7CiAgICAgICAgc3dpdGNoIChQcmVmaWx0ZXJDQi5mYWNl
SW5kZXgpCiAgICAgICAgewogICAgICAgICAgICBjYXNlIDB1OgogICAgICAgICAgICB7CiAgICAg
ICAgICAgICAgICBfMTE1ID0gZmFzdDo6bm9ybWFsaXplKGZsb2F0MygxLjAsIC1fNzYueSwgLV83
Ni54KSk7CiAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBj
YXNlIDF1OgogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBfMTE1ID0gZmFzdDo6bm9ybWFs
aXplKGZsb2F0MygtMS4wLCAtXzc2LnksIF83Ni54KSk7CiAgICAgICAgICAgICAgICBicmVhazsK
ICAgICAgICAgICAgfQogICAgICAgICAgICBjYXNlIDJ1OgogICAgICAgICAgICB7CiAgICAgICAg
ICAgICAgICBfMTE1ID0gZmFzdDo6bm9ybWFsaXplKGZsb2F0MyhfNzYueCwgMS4wLCBfNzYueSkp
OwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgIH0KICAgICAgICAgICAgY2FzZSAz
dToKICAgICAgICAgICAgewogICAgICAgICAgICAgICAgXzExNSA9IGZhc3Q6Om5vcm1hbGl6ZShm
bG9hdDMoXzc2LngsIC0xLjAsIC1fNzYueSkpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAg
ICAgICAgIH0KICAgICAgICAgICAgY2FzZSA0dToKICAgICAgICAgICAgewogICAgICAgICAgICAg
ICAgXzExNSA9IGZhc3Q6Om5vcm1hbGl6ZShmbG9hdDMoXzc2LngsIC1fNzYueSwgMS4wKSk7CiAg
ICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgfQogICAgICAgICAgICBkZWZhdWx0Ogog
ICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBfMTE1ID0gZmFzdDo6bm9ybWFsaXplKGZsb2F0
MygtXzc2LngsIC1fNzYueSwgLTEuMCkpOwogICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAg
ICAgIH0KICAgICAgICB9CiAgICAgICAgdWludCBfMTE4ID0gbWF4KFByZWZpbHRlckNCLnNhbXBs
ZUNvdW50LCAxdSk7CiAgICAgICAgZmxvYXQzIF8xMjA7CiAgICAgICAgZmxvYXQgXzEyMzsKICAg
ICAgICBfMTIwID0gZmxvYXQzKDAuMCk7CiAgICAgICAgXzEyMyA9IDAuMDsKICAgICAgICBmbG9h
dDMgXzEyMTsKICAgICAgICBmbG9hdCBfMTI0OwogICAgICAgIGZvciAodWludCBfMTI1ID0gMHU7
IF8xMjUgPCBfMTE4OyBfMTIwID0gXzEyMSwgXzEyMyA9IF8xMjQsIF8xMjUrKykKICAgICAgICB7
CiAgICAgICAgICAgIGZsb2F0IF8xMzAgPSBmbG9hdChfMTI1KTsKICAgICAgICAgICAgZmxvYXQg
XzEzNCA9IGZyYWN0KF8xMzAgKiAyLjYxODAzMzg4NTk1NTgxMDU0Njg3NSk7CiAgICAgICAgICAg
IGZsb2F0IF8xMzcgPSBQcmVmaWx0ZXJDQi5yb3VnaG5lc3MgKiBQcmVmaWx0ZXJDQi5yb3VnaG5l
c3M7CiAgICAgICAgICAgIGZsb2F0IF8xMzggPSA2LjI4MzE4NTQ4MjAyNTE0NjQ4NDM3NSAqIChf
MTMwIC8gZmxvYXQoXzExOCkpOwogICAgICAgICAgICBmbG9hdCBfMTQ1ID0gc3FydCgoMS4wIC0g
XzEzNCkgLyAoMS4wICsgKCgoXzEzNyAqIF8xMzcpIC0gMS4wKSAqIF8xMzQpKSk7CiAgICAgICAg
ICAgIGZsb2F0IF8xNDkgPSBzcXJ0KHByZWNpc2U6Om1heCgwLjAsIDEuMCAtIChfMTQ1ICogXzE0
NSkpKTsKICAgICAgICAgICAgZmxvYXQzIF8xNTQgPSBmbG9hdDMoY29zKF8xMzgpICogXzE0OSwg
c2luKF8xMzgpICogXzE0OSwgXzE0NSk7CiAgICAgICAgICAgIGZsb2F0MyBfMTU5ID0gZmFzdDo6
bm9ybWFsaXplKChfMTU0ICogKDIuMCAqIGRvdChfMTE1LCBfMTU0KSkpIC0gXzExNSk7CiAgICAg
ICAgICAgIGZsb2F0IF8xNjEgPSBmYXN0OjpjbGFtcChkb3QoXzExNSwgXzE1OSksIDAuMCwgMS4w
KTsKICAgICAgICAgICAgaWYgKF8xNjEgPiAwLjApCiAgICAgICAgICAgIHsKICAgICAgICAgICAg
ICAgIF8xMjEgPSBfMTIwICsgKEVudmlyb25tZW50TWFwLnNhbXBsZShFbnZpcm9ubWVudFNhbXBs
ZXIsIF8xNTksIGxldmVsKFByZWZpbHRlckNCLm1pcExldmVsKSkueHl6ICogXzE2MSk7CiAgICAg
ICAgICAgICAgICBfMTI0ID0gXzEyMyArIF8xNjE7CiAgICAgICAgICAgIH0KICAgICAgICAgICAg
ZWxzZQogICAgICAgICAgICB7CiAgICAgICAgICAgICAgICBfMTIxID0gXzEyMDsKICAgICAgICAg
ICAgICAgIF8xMjQgPSBfMTIzOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGZsb2F0
MyBfMTg4OwogICAgICAgIGlmIChfMTIzID4gMC4wKQogICAgICAgIHsKICAgICAgICAgICAgXzE4
OCA9IF8xMjAgLyBmbG9hdDMoXzEyMyk7CiAgICAgICAgfQogICAgICAgIGVsc2UKICAgICAgICB7
CiAgICAgICAgICAgIF8xODggPSBFbnZpcm9ubWVudE1hcC5zYW1wbGUoRW52aXJvbm1lbnRTYW1w
bGVyLCBfMTE1LCBsZXZlbChQcmVmaWx0ZXJDQi5taXBMZXZlbCkpLnh5ejsKICAgICAgICB9CiAg
ICAgICAgdWludDMgXzE5NCA9IHVpbnQzKGdsX0dsb2JhbEludm9jYXRpb25JRC54eSwgUHJlZmls
dGVyQ0IuZmFjZUluZGV4KTsKICAgICAgICBPdXRwdXRUZXh0dXJlLndyaXRlKGZsb2F0NChfMTg4
LCAxLjApLCB1aW50MihfMTk0Lnh5KSwgdWludChfMTk0LnopKTsKICAgICAgICBicmVhazsKICAg
IH0gd2hpbGUoZmFsc2UpOwp9Cgo=
